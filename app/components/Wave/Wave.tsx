import { motion, useScroll, useTransform } from "motion/react";
import type { RefObject } from "react";

interface WaveProps {
  className?: string;
  wave1Color?: string;
  wave2Color?: string;
  wave3Color?: string;
  scrollContainerRef?: RefObject<HTMLDivElement | null>;
}

export default function Wave({
  className,
  wave1Color = "#ffffff",
  wave2Color = "#89c8e1",
  wave3Color = "#4cc0fb",
  scrollContainerRef,
}: WaveProps) {
  const { scrollY } = useScroll({
    container: scrollContainerRef,
  });

  // Effet de parallaxe léger vers le haut: la première vague bouge plus vite, la deuxième moins
  // La dernière vague reste fixe
  const wave1Y = useTransform(scrollY, [0, 1000], [70, 70 - 1000 * 0.15]);
  const wave2Y = useTransform(scrollY, [0, 1000], [70, 70 - 1000 * 0.1]);

  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      xmlnsXlink="http://www.w3.org/1999/xlink"
      id="wave"
      viewBox="0 0 1440 270"
      version="1.1"
      className={className}
      aria-hidden="true"
      role="presentation"
    >
      {/* First Wave */}
      <motion.path
        style={{ y: wave1Y }}
        fill={wave1Color}
        d="M0,90L60,80C120,70,240,50,360,55C480,60,600,90,720,85C840,80,960,40,1080,35C1200,30,1320,60,1440,75C1560,90,1680,90,1800,110C1920,130,2040,170,2160,200C2280,230,2400,250,2520,230C2640,210,2760,150,2880,130C3000,110,3120,130,3240,115C3360,100,3480,50,3600,50C3720,50,3840,100,3960,135C4080,170,4200,190,4320,170C4440,150,4560,90,4680,85C4800,80,4920,130,5040,140C5160,150,5280,120,5400,130C5520,140,5640,190,5760,215C5880,240,6000,240,6120,210C6240,180,6360,120,6480,100C6600,80,6720,100,6840,120C6960,140,7080,160,7200,170C7320,180,7440,180,7560,150C7680,120,7800,60,7920,60C8040,60,8160,120,8280,155C8400,190,8520,200,8580,205L8640,210L8640,300L8580,300C8520,300,8400,300,8280,300C8160,300,8040,300,7920,300C7800,300,7680,300,7560,300C7440,300,7320,300,7200,300C7080,300,6960,300,6840,300C6720,300,6600,300,6480,300C6360,300,6240,300,6120,300C6000,300,5880,300,5760,300C5640,300,5520,300,5400,300C5280,300,5160,300,5040,300C4920,300,4800,300,4680,300C4560,300,4440,300,4320,300C4200,300,4080,300,3960,300C3840,300,3720,300,3600,300C3480,300,3360,300,3240,300C3120,300,3000,300,2880,300C2760,300,2640,300,2520,300C2400,300,2280,300,2160,300C2040,300,1920,300,1800,300C1680,300,1560,300,1440,300C1320,300,1200,300,1080,300C960,300,840,300,720,300C600,300,480,300,360,300C240,300,120,300,60,300L0,300Z"
      />

      {/* Second Wave */}
      <motion.path
        style={{ y: wave2Y }}
        fill={wave2Color}
        d="M0,210L60,190C120,170,240,130,360,130C480,130,600,170,720,155C840,140,960,70,1080,65C1200,60,1320,120,1440,140C1560,160,1680,140,1800,135C1920,130,2040,140,2160,165C2280,190,2400,230,2520,240C2640,250,2760,230,2880,220C3000,210,3120,210,3240,185C3360,160,3480,110,3600,110C3720,110,3840,160,3960,155C4080,150,4200,90,4320,100C4440,110,4560,190,4680,220C4800,250,4920,230,5040,220C5160,210,5280,210,5400,205C5520,200,5640,190,5760,155C5880,120,6000,60,6120,60C6240,60,6360,120,6480,155C6600,190,6720,200,6840,185C6960,170,7080,130,7200,95C7320,60,7440,30,7560,45C7680,60,7800,120,7920,120C8040,120,8160,60,8280,55C8400,50,8520,100,8580,125L8640,150L8640,300L8580,300C8520,300,8400,300,8280,300C8160,300,8040,300,7920,300C7800,300,7680,300,7560,300C7440,300,7320,300,7200,300C7080,300,6960,300,6840,300C6720,300,6600,300,6480,300C6360,300,6240,300,6120,300C6000,300,5880,300,5760,300C5640,300,5520,300,5400,300C5280,300,5160,300,5040,300C4920,300,4800,300,4680,300C4560,300,4440,300,4320,300C4200,300,4080,300,3960,300C3840,300,3720,300,3600,300C3480,300,3360,300,3240,300C3120,300,3000,300,2880,300C2760,300,2640,300,2520,300C2400,300,2280,300,2160,300C2040,300,1920,300,1800,300C1680,300,1560,300,1440,300C1320,300,1200,300,1080,300C960,300,840,300,720,300C600,300,480,300,360,300C240,300,120,300,60,300L0,300Z"
      />

      {/* Third Wave */}
      <path
        style={{ transform: "translate(0, 100px)" }}
        fill={wave3Color}
        d="M0,120L60,135C120,150,240,180,360,175C480,170,600,130,720,120C840,110,960,130,1080,135C1200,140,1320,130,1440,115C1560,100,1680,80,1800,100C1920,120,2040,180,2160,170C2280,160,2400,80,2520,45C2640,10,2760,20,2880,35C3000,50,3120,70,3240,70C3360,70,3480,50,3600,75C3720,100,3840,170,3960,195C4080,220,4200,200,4320,190C4440,180,4560,180,4680,180C4800,180,4920,180,5040,195C5160,210,5280,240,5400,240C5520,240,5640,210,5760,205C5880,200,6000,220,6120,235C6240,250,6360,260,6480,250C6600,240,6720,210,6840,210C6960,210,7080,240,7200,240C7320,240,7440,210,7560,180C7680,150,7800,120,7920,130C8040,140,8160,190,8280,215C8400,240,8520,240,8580,240L8640,240L8640,300L8580,300C8520,300,8400,300,8280,300C8160,300,8040,300,7920,300C7800,300,7680,300,7560,300C7440,300,7320,300,7200,300C7080,300,6960,300,6840,300C6720,300,6600,300,6480,300C6360,300,6240,300,6120,300C6000,300,5880,300,5760,300C5640,300,5520,300,5400,300C5280,300,5160,300,5040,300C4920,300,4800,300,4680,300C4560,300,4440,300,4320,300C4200,300,4080,300,3960,300C3840,300,3720,300,3600,300C3480,300,3360,300,3240,300C3120,300,3000,300,2880,300C2760,300,2640,300,2520,300C2400,300,2280,300,2160,300C2040,300,1920,300,1800,300C1680,300,1560,300,1440,300C1320,300,1200,300,1080,300C960,300,840,300,720,300C600,300,480,300,360,300C240,300,120,300,60,300L0,300Z"
      />
    </svg>
  );
}
